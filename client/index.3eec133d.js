import{O as t,S as e,i as n,s as o,e as l,t as r,b as c,g as s,h as a,d as i,k as m,m as u,l as h,z as f,a as d,f as v,K as p,v as y,x as g,o as $,c as k,j as E,n as w,p as x,r as N,u as M,I,J as b,P as S,Q as T,N as K,q as j,R as P,T as H,C as O,E as U,U as V}from"./client.1f4cf4f5.js";import{g as A,d as L,m as q}from"./download.bcb9ad50.js";function B(e,{delay:n=0,duration:o=400,easing:l=t}){const r=+getComputedStyle(e).opacity;return{delay:n,duration:o,easing:l,css:t=>"opacity: "+t*r}}const C="https://ramblenride.github.io/motorcycle-service-db";async function D(t,e=fetch){const n=await e(`${C}/${t}`);if(200===n.status){const t=await n.json(),e=Object.values(t.motorcycles)[0];return e.tasks.sort((t,e)=>t.name.localeCompare(e.name)),e}throw new Error(`${n.status} - ${n.statusText}`)}function R(t,e,n){const o=t.slice();return o[3]=e[n],o}function F(t){let e,n,o,d=t[0].level+"";return{c(){e=l("span"),n=r(d),this.h()},l(t){e=c(t,"SPAN",{class:!0});var o=s(e);n=a(o,d),o.forEach(i),this.h()},h(){m(e,"class",o="level "+t[0].level+" svelte-ck2cfg")},m(t,o){u(t,e,o),h(e,n)},p(t,l){1&l&&d!==(d=t[0].level+"")&&f(n,d),1&l&&o!==(o="level "+t[0].level+" svelte-ck2cfg")&&m(e,"class",o)},d(t){t&&i(e)}}}function J(t){let e,n,o,m,f=t[0].intervalKm&&z(t),p=t[0].intervalKm&&t[0].intervalMonths&&Q(),y=t[0].intervalMonths&&G(t);return{c(){e=l("p"),n=r("Service Interval:\n        "),f&&f.c(),o=d(),p&&p.c(),m=d(),y&&y.c()},l(t){e=c(t,"P",{});var l=s(e);n=a(l,"Service Interval:\n        "),f&&f.l(l),o=v(l),p&&p.l(l),m=v(l),y&&y.l(l),l.forEach(i)},m(t,l){u(t,e,l),h(e,n),f&&f.m(e,null),h(e,o),p&&p.m(e,null),h(e,m),y&&y.m(e,null)},p(t,n){t[0].intervalKm?f?f.p(t,n):(f=z(t),f.c(),f.m(e,o)):f&&(f.d(1),f=null),t[0].intervalKm&&t[0].intervalMonths?p||(p=Q(),p.c(),p.m(e,m)):p&&(p.d(1),p=null),t[0].intervalMonths?y?y.p(t,n):(y=G(t),y.c(),y.m(e,null)):y&&(y.d(1),y=null)},d(t){t&&i(e),f&&f.d(),p&&p.d(),y&&y.d()}}}function z(t){let e,n,o=t[0].intervalKm+"";return{c(){e=r(o),n=r(" km")},l(t){e=a(t,o),n=a(t," km")},m(t,o){u(t,e,o),u(t,n,o)},p(t,n){1&n&&o!==(o=t[0].intervalKm+"")&&f(e,o)},d(t){t&&i(e),t&&i(n)}}}function Q(t){let e;return{c(){e=r("/")},l(t){e=a(t,"/")},m(t,n){u(t,e,n)},d(t){t&&i(e)}}}function G(t){let e,n,o=t[0].intervalMonths+"";return{c(){e=r(o),n=r(" months")},l(t){e=a(t,o),n=a(t," months")},m(t,o){u(t,e,o),u(t,n,o)},p(t,n){1&n&&o!==(o=t[0].intervalMonths+"")&&f(e,o)},d(t){t&&i(e),t&&i(n)}}}function W(t){let e,n,o,m,f=t[0].km&&X(t),p=t[0].km&&t[0].months&&Y(),y=t[0].months&&Z(t);return{c(){e=l("p"),n=r("Fixed Service:\n        "),f&&f.c(),o=d(),p&&p.c(),m=d(),y&&y.c()},l(t){e=c(t,"P",{});var l=s(e);n=a(l,"Fixed Service:\n        "),f&&f.l(l),o=v(l),p&&p.l(l),m=v(l),y&&y.l(l),l.forEach(i)},m(t,l){u(t,e,l),h(e,n),f&&f.m(e,null),h(e,o),p&&p.m(e,null),h(e,m),y&&y.m(e,null)},p(t,n){t[0].km?f?f.p(t,n):(f=X(t),f.c(),f.m(e,o)):f&&(f.d(1),f=null),t[0].km&&t[0].months?p||(p=Y(),p.c(),p.m(e,m)):p&&(p.d(1),p=null),t[0].months?y?y.p(t,n):(y=Z(t),y.c(),y.m(e,null)):y&&(y.d(1),y=null)},d(t){t&&i(e),f&&f.d(),p&&p.d(),y&&y.d()}}}function X(t){let e,n,o=t[0].km+"";return{c(){e=r(o),n=r(" km")},l(t){e=a(t,o),n=a(t," km")},m(t,o){u(t,e,o),u(t,n,o)},p(t,n){1&n&&o!==(o=t[0].km+"")&&f(e,o)},d(t){t&&i(e),t&&i(n)}}}function Y(t){let e;return{c(){e=r("/")},l(t){e=a(t,"/")},m(t,n){u(t,e,n)},d(t){t&&i(e)}}}function Z(t){let e,n,o=t[0].months+"";return{c(){e=r(o),n=r(" months")},l(t){e=a(t,o),n=a(t," months")},m(t,o){u(t,e,o),u(t,n,o)},p(t,n){1&n&&o!==(o=t[0].months+"")&&f(e,o)},d(t){t&&i(e),t&&i(n)}}}function _(t){let e,n=t[0].links,o=[];for(let e=0;e<n.length;e+=1)o[e]=tt(R(t,n,e));return{c(){e=l("ul");for(let t=0;t<o.length;t+=1)o[t].c()},l(t){e=c(t,"UL",{});var n=s(e);for(let t=0;t<o.length;t+=1)o[t].l(n);n.forEach(i)},m(t,n){u(t,e,n);for(let t=0;t<o.length;t+=1)o[t].m(e,null)},p(t,l){if(1&l){let r;for(n=t[0].links,r=0;r<n.length;r+=1){const c=R(t,n,r);o[r]?o[r].p(c,l):(o[r]=tt(c),o[r].c(),o[r].m(e,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}},d(t){t&&i(e),p(o,t)}}}function tt(t){let e,n,o,p,y,g=t[3].name+"";return{c(){e=l("li"),n=l("a"),o=r(g),y=d(),this.h()},l(t){e=c(t,"LI",{});var l=s(e);n=c(l,"A",{href:!0});var r=s(n);o=a(r,g),r.forEach(i),y=v(l),l.forEach(i),this.h()},h(){m(n,"href",p=t[3].url)},m(t,l){u(t,e,l),h(e,n),h(n,o),h(e,y)},p(t,e){1&e&&g!==(g=t[3].name+"")&&f(o,g),1&e&&p!==(p=t[3].url)&&m(n,"href",p)},d(t){t&&i(e)}}}function et(t){let e,n,o,d=t[0].notes+"";return{c(){e=r("Notes:\n      "),n=l("div"),o=r(d),this.h()},l(t){e=a(t,"Notes:\n      "),n=c(t,"DIV",{class:!0});var l=s(n);o=a(l,d),l.forEach(i),this.h()},h(){m(n,"class","notes svelte-ck2cfg")},m(t,l){u(t,e,l),u(t,n,l),h(n,o)},p(t,e){1&e&&d!==(d=t[0].notes+"")&&f(o,d)},d(t){t&&i(e),t&&i(n)}}}function nt(t){let e,n,o,p,k,E,w,x,N,M,I,b,S,T,K=t[0].name+"",j=t[0].description+"",P=t[0].level&&F(t),H=(t[0].intervalKm||t[0].intervalMonths)&&J(t),O=(t[0].km||t[0].months)&&W(t),U=t[0].links&&_(t),V=t[0].notes&&et(t);return{c(){e=l("div"),n=l("button"),o=r(K),p=r(" - "),k=r(j),E=d(),P&&P.c(),w=d(),x=l("div"),H&&H.c(),N=d(),O&&O.c(),M=d(),U&&U.c(),I=d(),V&&V.c(),this.h()},l(t){e=c(t,"DIV",{});var l=s(e);n=c(l,"BUTTON",{class:!0});var r=s(n);o=a(r,K),p=a(r," - "),k=a(r,j),E=v(r),P&&P.l(r),r.forEach(i),w=v(l),x=c(l,"DIV",{class:!0});var m=s(x);H&&H.l(m),N=v(m),O&&O.l(m),M=v(m),U&&U.l(m),I=v(m),V&&V.l(m),m.forEach(i),l.forEach(i),this.h()},h(){m(n,"class","accordion svelte-ck2cfg"),y(n,"active",t[1]),m(x,"class",b="panel "+(t[1]?"":"hidden")+" svelte-ck2cfg")},m(l,r){u(l,e,r),h(e,n),h(n,o),h(n,p),h(n,k),h(n,E),P&&P.m(n,null),h(e,w),h(e,x),H&&H.m(x,null),h(x,N),O&&O.m(x,null),h(x,M),U&&U.m(x,null),h(x,I),V&&V.m(x,null),S||(T=g(n,"click",t[2]),S=!0)},p(t,[e]){1&e&&K!==(K=t[0].name+"")&&f(o,K),1&e&&j!==(j=t[0].description+"")&&f(k,j),t[0].level?P?P.p(t,e):(P=F(t),P.c(),P.m(n,null)):P&&(P.d(1),P=null),2&e&&y(n,"active",t[1]),t[0].intervalKm||t[0].intervalMonths?H?H.p(t,e):(H=J(t),H.c(),H.m(x,N)):H&&(H.d(1),H=null),t[0].km||t[0].months?O?O.p(t,e):(O=W(t),O.c(),O.m(x,M)):O&&(O.d(1),O=null),t[0].links?U?U.p(t,e):(U=_(t),U.c(),U.m(x,I)):U&&(U.d(1),U=null),t[0].notes?V?V.p(t,e):(V=et(t),V.c(),V.m(x,null)):V&&(V.d(1),V=null),2&e&&b!==(b="panel "+(t[1]?"":"hidden")+" svelte-ck2cfg")&&m(x,"class",b)},i:$,o:$,d(t){t&&i(e),P&&P.d(),H&&H.d(),O&&O.d(),U&&U.d(),V&&V.d(),S=!1,T()}}}function ot(t,e,n){let{task:o}=e,l=!1;return t.$$set=t=>{"task"in t&&n(0,o=t.task)},[o,l,()=>{n(1,l=!l)}]}class lt extends e{constructor(t){super(),n(this,t,ot,nt,o,{task:0})}}function rt(t,e,n){const o=t.slice();return o[2]=e[n],o}function ct(t){let e,n;return e=new lt({props:{task:t[2]}}),{c(){k(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,o){w(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.task=t[2]),e.$set(o)},i(t){n||(x(e.$$.fragment,t),n=!0)},o(t){N(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function st(t){let e,n,o,y,$,k,E,w,M,S,T,K,j,P,H=t[0].name+"",O=t[0].description+"",U=t[0].tasks,V=[];for(let e=0;e<U.length;e+=1)V[e]=ct(rt(t,U,e));const A=t=>N(V[t],1,1,()=>{V[t]=null});return{c(){e=l("h1"),n=r(H),o=d(),y=l("h3"),$=r(O),k=d(),E=l("hr"),w=d();for(let t=0;t<V.length;t+=1)V[t].c();M=d(),S=l("button"),T=r("Download (as JSON)"),this.h()},l(t){e=c(t,"H1",{});var l=s(e);n=a(l,H),l.forEach(i),o=v(t),y=c(t,"H3",{class:!0});var r=s(y);$=a(r,O),r.forEach(i),k=v(t),E=c(t,"HR",{class:!0}),w=v(t);for(let e=0;e<V.length;e+=1)V[e].l(t);M=v(t),S=c(t,"BUTTON",{type:!0});var m=s(S);T=a(m,"Download (as JSON)"),m.forEach(i),this.h()},h(){m(y,"class","svelte-vyo4y4"),m(E,"class","solid svelte-vyo4y4"),m(S,"type","submit")},m(l,r){u(l,e,r),h(e,n),u(l,o,r),u(l,y,r),h(y,$),u(l,k,r),u(l,E,r),u(l,w,r);for(let t=0;t<V.length;t+=1)V[t].m(l,r);u(l,M,r),u(l,S,r),h(S,T),K=!0,j||(P=g(S,"click",t[1]),j=!0)},p(t,[e]){if((!K||1&e)&&H!==(H=t[0].name+"")&&f(n,H),(!K||1&e)&&O!==(O=t[0].description+"")&&f($,O),1&e){let n;for(U=t[0].tasks,n=0;n<U.length;n+=1){const o=rt(t,U,n);V[n]?(V[n].p(o,e),x(V[n],1)):(V[n]=ct(o),V[n].c(),x(V[n],1),V[n].m(M.parentNode,M))}for(I(),n=U.length;n<V.length;n+=1)A(n);b()}},i(t){if(!K){for(let t=0;t<U.length;t+=1)x(V[t]);K=!0}},o(t){V=V.filter(Boolean);for(let t=0;t<V.length;t+=1)N(V[t]);K=!1},d(t){t&&i(e),t&&i(o),t&&i(y),t&&i(k),t&&i(E),t&&i(w),p(V,t),t&&i(M),t&&i(S),j=!1,P()}}}function at(t,e,n){let{motorcycle:o}=e;return t.$$set=t=>{"motorcycle"in t&&n(0,o=t.motorcycle)},[o,function(){const t=A(o);L(t,q(o))}]}class it extends e{constructor(t){super(),n(this,t,at,st,o,{motorcycle:0})}}function mt(t,e,n){const o=t.slice();return o[3]=e[n],o}function ut(t){let e,n,o,p,y,g=t[3].name+"";return{c(){e=l("li"),n=l("a"),o=r(g),y=d(),this.h()},l(t){e=c(t,"LI",{class:!0});var l=s(e);n=c(l,"A",{href:!0});var r=s(n);o=a(r,g),r.forEach(i),y=v(l),l.forEach(i),this.h()},h(){m(n,"href",p="viewer?motorcycle="+encodeURIComponent(t[3].location)),m(e,"class","svelte-p1q3wv")},m(t,l){u(t,e,l),h(e,n),h(n,o),h(e,y)},p(t,e){1&e&&g!==(g=t[3].name+"")&&f(o,g),1&e&&p!==(p="viewer?motorcycle="+encodeURIComponent(t[3].location))&&m(n,"href",p)},d(t){t&&i(e)}}}function ht(t){let e,n,o;const m=t[2].default,f=S(m,t,t[1],null),y=f||function(t){let e,n;return{c(){e=l("h1"),n=r("Motorcycle List")},l(t){e=c(t,"H1",{});var o=s(e);n=a(o,"Motorcycle List"),o.forEach(i)},m(t,o){u(t,e,o),h(e,n)},d(t){t&&i(e)}}}();let g=t[0],$=[];for(let e=0;e<g.length;e+=1)$[e]=ut(mt(t,g,e));return{c(){y&&y.c(),e=d(),n=l("ul");for(let t=0;t<$.length;t+=1)$[t].c()},l(t){y&&y.l(t),e=v(t),n=c(t,"UL",{});var o=s(n);for(let t=0;t<$.length;t+=1)$[t].l(o);o.forEach(i)},m(t,l){y&&y.m(t,l),u(t,e,l),u(t,n,l);for(let t=0;t<$.length;t+=1)$[t].m(n,null);o=!0},p(t,[e]){if(f&&f.p&&2&e&&T(f,m,t,t[1],e,null,null),1&e){let o;for(g=t[0],o=0;o<g.length;o+=1){const l=mt(t,g,o);$[o]?$[o].p(l,e):($[o]=ut(l),$[o].c(),$[o].m(n,null))}for(;o<$.length;o+=1)$[o].d(1);$.length=g.length}},i(t){o||(x(y,t),o=!0)},o(t){N(y,t),o=!1},d(t){y&&y.d(t),t&&i(e),t&&i(n),p($,t)}}}function ft(t,e,n){let{motorcycles:o=[]}=e,{$$slots:l={},$$scope:r}=e;return t.$$set=t=>{"motorcycles"in t&&n(0,o=t.motorcycles),"$$scope"in t&&n(1,r=t.$$scope)},[o,r,l]}class dt extends e{constructor(t){super(),n(this,t,ft,ht,o,{motorcycles:0})}}function vt(t){let e,n,o;return n=new dt({props:{motorcycles:t[3],$$slots:{default:[gt]},$$scope:{ctx:t}}}),{c(){e=l("p"),k(n.$$.fragment)},l(t){e=c(t,"P",{});var o=s(e);E(n.$$.fragment,o),o.forEach(i)},m(t,l){u(t,e,l),w(n,e,null),o=!0},p(t,e){const o={};8&e&&(o.motorcycles=t[3]),128&e&&(o.$$scope={dirty:e,ctx:t}),n.$set(o)},i(t){o||(x(n.$$.fragment,t),o=!0)},o(t){N(n.$$.fragment,t),o=!1},d(t){t&&i(e),M(n)}}}function pt(t){let e,n,o=void 0!==t[0]&&$t(t);return{c(){o&&o.c(),e=K()},l(t){o&&o.l(t),e=K()},m(t,l){o&&o.m(t,l),u(t,e,l),n=!0},p(t,n){void 0!==t[0]?o?(o.p(t,n),1&n&&x(o,1)):(o=$t(t),o.c(),x(o,1),o.m(e.parentNode,e)):o&&(I(),N(o,1,1,()=>{o=null}),b())},i(t){n||(x(o),n=!0)},o(t){N(o),n=!1},d(t){o&&o.d(t),t&&i(e)}}}function yt(t){let e,n,o,m,p,y,g,k,E,w=t[2].response.status+"",x=t[2].message+"",N=t[2].response.statusText+"";return{c(){e=l("h1"),n=r("Error - "),o=r(w),m=d(),p=l("p"),y=r(x),g=d(),k=l("p"),E=r(N)},l(t){e=c(t,"H1",{});var l=s(e);n=a(l,"Error - "),o=a(l,w),l.forEach(i),m=v(t),p=c(t,"P",{});var r=s(p);y=a(r,x),r.forEach(i),g=v(t),k=c(t,"P",{});var u=s(k);E=a(u,N),u.forEach(i)},m(t,l){u(t,e,l),h(e,n),h(e,o),u(t,m,l),u(t,p,l),h(p,y),u(t,g,l),u(t,k,l),h(k,E)},p(t,e){4&e&&w!==(w=t[2].response.status+"")&&f(o,w),4&e&&x!==(x=t[2].message+"")&&f(y,x),4&e&&N!==(N=t[2].response.statusText+"")&&f(E,N)},i:$,o:$,d(t){t&&i(e),t&&i(m),t&&i(p),t&&i(g),t&&i(k)}}}function gt(t){let e,n,o,m,f;return{c(){e=l("h1"),n=r("Motorcycle Service Information"),o=d(),m=l("h2"),f=r("Viewer")},l(t){e=c(t,"H1",{});var l=s(e);n=a(l,"Motorcycle Service Information"),l.forEach(i),o=v(t),m=c(t,"H2",{});var r=s(m);f=a(r,"Viewer"),r.forEach(i)},m(t,l){u(t,e,l),h(e,n),u(t,o,l),u(t,m,l),h(m,f)},d(t){t&&i(e),t&&i(o),t&&i(m)}}}function $t(t){let e,n,o,r;return n=new it({props:{motorcycle:t[0]}}),{c(){e=l("p"),k(n.$$.fragment)},l(t){e=c(t,"P",{});var o=s(e);E(n.$$.fragment,o),o.forEach(i)},m(t,o){u(t,e,o),w(n,e,null),r=!0},p(t,e){const o={};1&e&&(o.motorcycle=t[0]),n.$set(o)},i(t){r||(x(n.$$.fragment,t),o||U(()=>{o=V(e,B,{}),o.start()}),r=!0)},o(t){N(n.$$.fragment,t),r=!1},d(t){t&&i(e),M(n)}}}function kt(t){let e,n,o,r,s,a,f;document.title=e="Braap! - "+(void 0!==t[0]?t[0].name:"Viewer");const p=[yt,pt,vt],y=[];function g(t,e){return void 0!==t[2]?0:void 0!==t[1]?1:void 0!==t[3]&&void 0===t[1]?2:-1}return~(r=g(t))&&(s=y[r]=p[r](t)),{c(){n=l("meta"),o=d(),s&&s.c(),a=K(),this.h()},l(t){const e=j('[data-svelte="svelte-pcqglw"]',document.head);n=c(e,"META",{name:!0,content:!0}),e.forEach(i),o=v(t),s&&s.l(t),a=K(),this.h()},h(){m(n,"name","description"),m(n,"content","A viewer for motorcycle service intervals")},m(t,e){h(document.head,n),u(t,o,e),~r&&y[r].m(t,e),u(t,a,e),f=!0},p(t,[n]){(!f||1&n)&&e!==(e="Braap! - "+(void 0!==t[0]?t[0].name:"Viewer"))&&(document.title=e);let o=r;r=g(t),r===o?~r&&y[r].p(t,n):(s&&(I(),N(y[o],1,1,()=>{y[o]=null}),b()),~r?(s=y[r],s||(s=y[r]=p[r](t),s.c()),x(s,1),s.m(a.parentNode,a)):s=null)},i(t){f||(x(s),f=!0)},o(t){N(s),f=!1},d(t){i(n),t&&i(o),~r&&y[r].d(t),t&&i(a)}}}async function Et({params:t,query:e}){const n=e.motorcycle;if(void 0!==n){return{motorcycle:await D(n,this.fetch),motorcycleName:n,error:void 0}}return{motorcycleName:void 0,motorcycle:void 0,motorcycles:await async function(t=fetch){const e=await t(C+"/motorcycle-service-index.json");if(200===e.status)return e.json().then(t=>Array.from(Object.keys(t)).sort().map(e=>({...t[e],name:e})));throw new Error(`${e.status} - ${e.statusText}`)}(this.fetch),error:void 0}}function wt(t,e,n){let o,{motorcycles:l=[]}=e,{motorcycle:r}=e,{motorcycleName:c}=e,{error:s}=e;const{page:a}=P();return H(t,a,t=>n(5,o=t)),O(async()=>{const t=o.query.motorcycle;await async function(t){if(void 0!==t)try{n(1,c=t),n(0,r=await D(t)),n(2,s=void 0)}catch(t){n(2,s={response:{statusText:t.message},message:"Failed to download motorcycle service information"}),n(0,r=void 0),n(1,c=void 0)}else n(0,r=void 0),n(1,c=void 0)}(t)}),t.$$set=t=>{"motorcycles"in t&&n(3,l=t.motorcycles),"motorcycle"in t&&n(0,r=t.motorcycle),"motorcycleName"in t&&n(1,c=t.motorcycleName),"error"in t&&n(2,s=t.error)},[r,c,s,l,a]}export default class extends e{constructor(t){super(),n(this,t,wt,kt,o,{motorcycles:3,motorcycle:0,motorcycleName:1,error:2})}}export{Et as preload};
